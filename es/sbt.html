<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Scala School - Simple Build Tool</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link rel="stylesheet" href="/scala_school/bootstrap-1.1.0.min.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39101739-7', 'twitter.github.io');
      ga('send', 'pageview');

    </script>
  </head>

  <body>
  
    <div class="topbar">
      <div class="fill">
        <div class="container fixed">
          <h3><a href="index.html">Simple Build Tool</a></h3>
          <ul class="nav secondary-nav">
            
              <li><a href="advanced-types.html">&laquo;Previous</a></li>
            
            
              <li><a href="coll2.html">Next&raquo;</a></li>
            
          </ul>

        </div>
      </div>
    </div>

    <div class="container" style="padding-top: 60px;">
      <p>¡Esta lección cubre <span class="caps">SBT</span>! Temas especifícos incluidos:</p>
<ul>
	<li>Crear un proyecto <span class="caps">SBT</span></li>
	<li>Comandos básicos</li>
	<li>La consola de <span class="caps">SBT</span></li>
	<li>Ejecución continua de comandos</li>
	<li>Personalización del proyecto</li>
	<li>Comandos personalizados</li>
	<li>Tour rápido por código fuente de <span class="caps">SBT</span></li>
</ul>
<h2>A cerca de <span class="caps">SBT</span></h2>
<p><span class="caps">SBT</span> es una moderna herramienta de construcción. Aunque está escrita en Scala y brinda muchas comodidades a Scala, es una herramienta de construcción de proposito general.</p>
<h2>¿Por qué <span class="caps">SBT</span>?</h2>
<ul>
	<li>Sane(ish) dependency management
	<ul>
		<li>Ivy for dependency management</li>
		<li>Only-update-on-request model</li>
	</ul></li>
	<li>Full Scala language support for creating tasks</li>
	<li>Continuous command execution</li>
	<li>Launch <span class="caps">REPL</span> in project context</li>
</ul>
<h2>Iniciando</h2>
<ul>
	<li><a href="http://www.scala-sbt.org/release/docs/Getting-Started/Setup.html">Descargar la libreria</a></li>
	<li>Crear un shell <span class="caps">SBT</span> que llame el jar (p. e.)</li>
</ul>
<pre>
java -Xmx512M -jar sbt-launch.jar "$@"
</pre>
<ul>
	<li>Asegurece que el ejecutable se encuentre en su path</li>
	<li>Ejecutar <span class="caps">SBT</span> para crear el proyecto</li>
</ul>
<pre>
[local ~/projects]$ sbt
Project does not exist, create new project? (y/N/s) y
Name: sample
Organization: com.twitter
Version [1.0]: 1.0-SNAPSHOT
Scala version [2.7.7]: 2.8.1
sbt version [0.7.4]:      
Getting Scala 2.7.7 ...
:: retrieving :: org.scala-tools.sbt#boot-scala
  confs: [default]
  2 artifacts copied, 0 already retrieved (9911kB/221ms)
Getting org.scala-tools.sbt sbt_2.7.7 0.7.4 ...
:: retrieving :: org.scala-tools.sbt#boot-app
  confs: [default]
  15 artifacts copied, 0 already retrieved (4096kB/167ms)
[success] Successfully initialized directory structure.
Getting Scala 2.8.1 ...
:: retrieving :: org.scala-tools.sbt#boot-scala
  confs: [default]
  2 artifacts copied, 0 already retrieved (15118kB/386ms)
[info] Building project sample 1.0-SNAPSHOT against Scala 2.8.1
[info]    using sbt.DefaultProject with sbt 0.7.4 and Scala 2.7.7
&gt; 
</pre>
<p>Tenga en cuenta que es una buena practica comenzar su proyecto con una version <span class="caps">SNAPSHOT</span></p>
<h2>Estructura del Proyecto</h2>
<ul>
	<li><code>project</code> &#8211; Archivos de definicion del proyecto
	<ul>
		<li><code>project/build/</code> _tuproyecto_@.scala@ &#8211; El archivo principal de definicion del proyecto</li>
		<li><code>project/buil.properties</code> &#8211; Definicion de versiones del proyecto, <span class="caps">SBT</span> y Scala</li>
	</ul></li>
	<li><code>src/main</code> &#8211; Aqui va su codigo, indicando en unsa subcarpeta el lenguaje (p. e. <code>src/main/scala</code>, <code>src/main/java</code>)</li>
	<li><code>src/main/resources</code> &#8211; Archivos estaticos que quiera agregar a su jar (p.e. el archivo de configuracion del log)</li>
	<li><code>src/test</code> &#8211; Es como <code>src/main</code>, pero para las pruebas</li>
	<li><code>lib_managed</code> &#8211; Los archivos jar de los que dependa su projecto. Actualizada por <span class="caps">SBT</span></li>
	<li><code>target</code> &#8211; El destino de los productos generados (p.e. codigo generado, archivos class, jars)</li>
</ul>
<h2>Agregando algo de código</h2>
<p>Estaremos creando un procesador <span class="caps">JSON</span> sencillo para simples tweets. Agregue el siguiente código a <code>src/main/scala/com/twitter/sample/SimpleParser.scala</code></p>
<pre>
package com.twitter.sample

case class SimpleParsed(id: Long, text: String)

class SimpleParser {

  val tweetRegex = "\"id\":(.*),\"text\":\"(.*)\"".r

  def parse(str: String) = {
    tweetRegex.findFirstMatchIn(str) match {
      case Some(m) =&gt; {
        val id = str.substring(m.start(1), m.end(1)).toInt
        val text = str.substring(m.start(2), m.end(2))
        Some(SimpleParsed(id, text))
      }
      case _ =&gt; None
    }
  }
}
</pre>
<p>Es feo y con errores, pero debería compilar</p>
<h2>Pruebas en la consola</h2>
<p><span class="caps">SBT</span> pede ser usado como script de la line de comandos y como una consola de construccion. Lo estaremos usando en principio como una consola de construccion, pero la mayoria de los comandos pueden ser ejecutados de manera independiente pasando el comando como una arametro a <span class="caps">SBT</span>, p. e.</p>
<pre>
sbt test
</pre>
<p>Tome en cuenta qe si un comando recibe argumentos, necesita</p>
<p><span class="caps">SBT</span> can be used both as a command line script and as a build console.  We&#8217;ll be primarily using it as a build console, but most commands can be run standalone by passing the command as an argument to <span class="caps">SBT</span>, p. e.</p>
<pre>
sbt test
</pre>
<p>Tenga en cuenta que si un comando toma argumentos, es necesario poner entre comillas el argumento completo, p. e.</p>
<p><code>sbt 'test-only com.twitter.sample.SampleSpec'</code></p>
<p>Es extraña esta manera.<br />
It&#8217;s weird that way.</p>
<p>De cualquier manera. Para comenzar a trabajar con nustrao codigo, lanzamos <span class="caps">SBT</span>.<br />
Anyway. To start working with our code, launch sbt</p>
<pre>
[local ~/projects/sbt-sample]$ sbt
[info] Building project sample 1.0-SNAPSHOT against Scala 2.8.1
[info]    using sbt.DefaultProject with sbt 0.7.4 and Scala 2.7.7
&gt; 
</pre>
<p><span class="caps">SBT</span> le permite iniciar un <span class="caps">REPL</span> de Scala con todas las dependencias de su proyecto cargadas.Compila el codigo fuente de su proyecto antes de ejecutar la consola, brindando una forma rapida de probar nuestro procesador.</p>
<p><span class="caps">SBT</span> allows you to start a Scala <span class="caps">REPL</span> with all your project<br />
dependencies loaded. It compiles your project source before launching<br />
the console, providing us a quick way to bench test our parser.</p>
<pre>
&gt; console
[info] 
[info] == compile ==
[info]   Source analysis: 0 new/modified, 0 indirectly invalidated, 0 removed.
[info] Compiling main sources...
[info] Nothing to compile.
[info]   Post-analysis: 3 classes.
[info] == compile ==
[info] 
[info] == copy-test-resources ==
[info] == copy-test-resources ==
[info] 
[info] == test-compile ==
[info]   Source analysis: 0 new/modified, 0 indirectly invalidated, 0 removed.
[info] Compiling test sources...
[info] Nothing to compile.
[info]   Post-analysis: 0 classes.
[info] == test-compile ==
[info] 
[info] == copy-resources ==
[info] == copy-resources ==
[info] 
[info] == console ==
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.8.1.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_22).
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt; 
</pre>
<p>Nuestro código ha compilado, y estamos proporcionando el símbolo típico de Scala. Vamos a crear un nuevo analizador, un tweet de muestra, y asegurarnos de que &#8220;funciona&#8221;</p>
<p>Our code has compiled, and we&#8217;re provide the typical Scala prompt.  We&#8217;ll create a new parser, an exemplar tweet, and ensure it &#8220;works&#8221;</p>
<pre>
scala&gt; import com.twitter.sample._            
import com.twitter.sample._

scala&gt; val tweet = """{"id":1,"text":"foo"}"""
tweet: java.lang.String = {"id":1,"text":"foo"}

scala&gt; val parser = new SimpleParser          
parser: com.twitter.sample.SimpleParser = com.twitter.sample.SimpleParser@71060c3e

scala&gt; parser.parse(tweet)                    
res0: Option[com.twitter.sample.SimpleParsed] = Some(SimpleParsed(1,"foo"}))

scala&gt; 
</pre>
<h2>Agregando Dependencias</h2>
<p>Nuestro procesador funciona para el pequeño conjunto de entradas, pero queremos agregar pruebas y hacerlo fallar. El primer paso es agregar la libreria de especificacion de pruebas y un procesador <span class="caps">JSON</span> real a nuestro proyecto. Para esto debemos ir mas alla de la estructura por default de un proyecto <span class="caps">SBT</span> y crear uno.</p>
<p><span class="caps">SBT</span> toma en cuenta los archivos de Scala en la carpeta project/build para configurar el proyecto. agregue lo siguiente a project/build/SampleProject.scala</p>
<pre>
import sbt._

class SampleProject(info: ProjectInfo) extends DefaultProject(info) {
  val jackson = "org.codehaus.jackson" % "jackson-core-asl" % "1.6.1"
  val specs = "org.scala-tools.testing" % "specs_2.8.0" % "1.6.5" % "test"
}
</pre>
<p>Una definicion de proyecto es una clase <span class="caps">SBT</span>. En nuestro caso extiene de DefaultProject de <span class="caps">SBT</span>.</p>
<p>Declara dependencias especificando un val que es una dependencia. <span class="caps">SBT</span> usa reflection para escanear todos los vals de dependencias en el proyecto y crear un arbol de dependencias en tiempo de contruccion. La sintaxis aqui puede ser nueva, pero es equivalente a las dependecnias de maven.</p>
<pre>
&lt;dependency&gt;
  &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-core-asl&lt;/artifactId&gt;
  &lt;version&gt;1.6.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.scala-tools.testing&lt;/groupId&gt;
  &lt;artifactId&gt;specs_2.8.0&lt;/artifactId&gt;
  &lt;version&gt;1.6.5&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</pre>
<p>Ahora podemos bajar las dependencias para nuestro proyecto. Desde la linea de comandos (no la consola <span class="caps">SBT</span>), ejecute sbt update</p>
<pre>
[local ~/projects/sbt-sample]$ sbt update
[info] Building project sample 1.0-SNAPSHOT against Scala 2.8.1
[info]    using SampleProject with sbt 0.7.4 and Scala 2.7.7
[info] 
[info] == update ==
[info] :: retrieving :: com.twitter#sample_2.8.1 [sync]
[info] 	confs: [compile, runtime, test, provided, system, optional, sources, javadoc]
[info] 	1 artifacts copied, 0 already retrieved (2785kB/71ms)
[info] == update ==
[success] Successful.
[info] 
[info] Total time: 1 s, completed Nov 24, 2010 8:47:26 AM
[info] 
[info] Total session time: 2 s, completed Nov 24, 2010 8:47:26 AM
[success] Build completed successfully.
</pre>
<p>Vera que sbt recupera la libreria de especificaciones. Tendrá ahora tambien una carpeta lib_managed, y lib_managed/scala_2.8.1/test que tendra el archivo specs_2.8.0-1.6.5.jar</p>
<h2>Agregando Pruebas</h2>
<p>Ahora que tenemos la libreria de pruebas añadida, punga el siguiente codigo en src/test/scala/com/twitter/sambpe/SimpleParcerSpec.scala</p>
<pre>
package com.twitter.sample

import org.specs._

object SimpleParserSpec extends Specification {
  "SimpleParser" should {
    val parser = new SimpleParser()
    "work with basic tweet" in {
      val tweet = """{"id":1,"text":"foo"}"""
      parser.parse(tweet) match {
        case Some(parsed) =&gt; {
          parsed.text must be_==("foo")
          parsed.id must be_==(1)
        }
        case _ =&gt; fail("didn't parse tweet")
      }
    }
  }
}
</pre>
<p>En la consola <span class="caps">SBT</span>, ejecutar test</p>
<pre>
&gt; test
[info] 
[info] == compile ==
[info]   Source analysis: 0 new/modified, 0 indirectly invalidated, 0 removed.
[info] Compiling main sources...
[info] Nothing to compile.
[info]   Post-analysis: 3 classes.
[info] == compile ==
[info] 
[info] == test-compile ==
[info]   Source analysis: 0 new/modified, 0 indirectly invalidated, 0 removed.
[info] Compiling test sources...
[info] Nothing to compile.
[info]   Post-analysis: 10 classes.
[info] == test-compile ==
[info] 
[info] == copy-test-resources ==
[info] == copy-test-resources ==
[info] 
[info] == copy-resources ==
[info] == copy-resources ==
[info] 
[info] == test-start ==
[info] == test-start ==
[info] 
[info] == com.twitter.sample.SimpleParserSpec ==
[info] SimpleParserSpec
[info] SimpleParser should
[info]   + work with basic tweet
[info] == com.twitter.sample.SimpleParserSpec ==
[info] 
[info] == test-complete ==
[info] == test-complete ==
[info] 
[info] == test-finish ==
[info] Passed: : Total 1, Failed 0, Errors 0, Passed 1, Skipped 0
[info]  
[info] All tests PASSED.
[info] == test-finish ==
[info] 
[info] == test-cleanup ==
[info] == test-cleanup ==
[info] 
[info] == test ==
[info] == test ==
[success] Successful.
[info] 
[info] Total time: 0 s, completed Nov 24, 2010 8:54:45 AM
&gt; 
</pre>
<p>¡Nuestro test funciona! Ahora podemos agregar mas. Una de las cosas buenas que tiene <span class="caps">SBT</span> es una forma de ejecutar acciones activadas. Anteponiendo a una accion una tilde inicia un ciclo que ejecuta la accion cada que los archivos de codigo fuente cambien. Vamos a ejecutar ~test y veamos que sucede.</p>
<pre>
[info] == test ==
[success] Successful.
[info] 
[info] Total time: 0 s, completed Nov 24, 2010 8:55:50 AM
1. Waiting for source changes... (press enter to interrupt)
</pre>
<p>Ahora vamos a agregar el sigueinte caso de prueba</p>
<pre>
    "reject a non-JSON tweet" in {
      val tweet = """"id":1,"text":"foo""""
      parser.parse(tweet) match {
        case Some(parsed) =&gt; fail("didn't reject a non-JSON tweet")
        case e =&gt; e must be_==(None)
      }
    }

    "ignore nested content" in {
      val tweet = """{"id":1,"text":"foo","nested":{"id":2}}"""
      parser.parse(tweet) match {
        case Some(parsed) =&gt; {
          parsed.text must be_==("foo")
          parsed.id must be_==(1)
        }
        case _ =&gt; fail("didn't parse tweet")
      }
    }

    "fail on partial content" in {
      val tweet = """{"id":1}"""
      parser.parse(tweet) match {
        case Some(parsed) =&gt; fail("didn't reject a partial tweet")
        case e =&gt; e must be_==(None)
      }
    }
</pre>
<p>Despues de guardar nuestro archivo, <span class="caps">SBT</span> detecta nuestros cambios, ejecuta las pruebas, y nos informa que nuestro procesador es defectuoso</p>
<pre>
[info] == com.twitter.sample.SimpleParserSpec ==
[info] SimpleParserSpec
[info] SimpleParser should
[info]   + work with basic tweet
[info]   x reject a non-JSON tweet
[info]     didn't reject a non-JSON tweet (Specification.scala:43)
[info]   x ignore nested content
[info]     'foo","nested":{"id' is not equal to 'foo' (SimpleParserSpec.scala:31)
[info]   + fail on partial content
</pre>
<p>Asi que vamos a hacer retrabajo en nuestro procesador <span class="caps">JSON</span> para ser real.</p>
<pre>
package com.twitter.sample

import org.codehaus.jackson._
import org.codehaus.jackson.JsonToken._

case class SimpleParsed(id: Long, text: String)

class SimpleParser {

  val parserFactory = new JsonFactory()

  def parse(str: String) = {
    val parser = parserFactory.createJsonParser(str)
    if (parser.nextToken() == START_OBJECT) {
      var token = parser.nextToken()
      var textOpt:Option[String] = None
      var idOpt:Option[Long] = None
      while(token != null) {
        if (token == FIELD_NAME) {
          parser.getCurrentName() match {
            case "text" =&gt; {
              parser.nextToken()
              textOpt = Some(parser.getText())
            }
            case "id" =&gt; {
              parser.nextToken()
              idOpt = Some(parser.getLongValue())
            }
            case _ =&gt; // noop
          }
        }
        token = parser.nextToken()
      }
      if (textOpt.isDefined &amp;&amp; idOpt.isDefined) {
        Some(SimpleParsed(idOpt.get, textOpt.get))
      } else {
        None
      }
    } else {
      None
    }
  }
}
</pre>
<p>Este es un simpre procesador Jackson, cuando guardemos, <span class="caps">SBT</span> recopila nuestro codigo y re-ejecuta nuestras pruebas. ¡Mejor!</p>
<pre>
info] SimpleParser should
[info]   + work with basic tweet
[info]   + reject a non-JSON tweet
[info]   x ignore nested content
[info]     '2' is not equal to '1' (SimpleParserSpec.scala:32)
[info]   + fail on partial content
[info] == com.twitter.sample.SimpleParserSpec ==
</pre>
<p>Oh, Oh. Necesitamos comprobar si hay objetos anidados. Vamos a agregar algunos guardias feos a nuestro bucle de lectura de tokens.</p>
<pre>
  def parse(str: String) = {
    val parser = parserFactory.createJsonParser(str)
    var nested = 0
    if (parser.nextToken() == START_OBJECT) {
      var token = parser.nextToken()
      var textOpt:Option[String] = None
      var idOpt:Option[Long] = None
      while(token != null) {
        if (token == FIELD_NAME &amp;&amp; nested == 0) {
          parser.getCurrentName() match {
            case "text" =&gt; {
              parser.nextToken()
              textOpt = Some(parser.getText())
            }
            case "id" =&gt; {
              parser.nextToken()
              idOpt = Some(parser.getLongValue())
            }
            case _ =&gt; // noop
          }
        } else if (token == START_OBJECT) {
          nested += 1
        } else if (token == END_OBJECT) {
          nested -= 1
        }
        token = parser.nextToken()
      }
      if (textOpt.isDefined &amp;&amp; idOpt.isDefined) {
        Some(SimpleParsed(idOpt.get, textOpt.get))
      } else {
        None
      }
    } else {
      None
    }
  }
</pre>
<p>Y&#8230; ¡Funciona!</p>
<h2>Enpaquetando y publicando</h2>
<p>En este punto podemos ejecutar el comando package para generar el archivo jar. Sin embargo podriamos querer compartir nuestro jar con otros equipos. Para ello lo construiremos sobre StandardProject, el cual nos da una gran ventaja.</p>
<p>El primer paso es incluir StandardProject como un plugin de <span class="caps">SBT</span>. Los plugins son una forma de introducir dependencias a su entregable en lugar del proyecto. Estas dependencias son definidas en project/plugins/Plugins.scala. Agregue lo siguiente al archivo Plugins.scala</p>
<pre>
import sbt._

class Plugins(info: ProjectInfo) extends PluginDefinition(info) {
  val twitterMaven = "twitter.com" at "http://maven.twttr.com/"
  val defaultProject = "com.twitter" % "standard-project" % "0.7.14"
}
</pre>
<p>Tenga en cuenta que hemos especificado un repositorio maven asi como una dependencia. Esto es porque la libreria de projetos standar esta hospedada por nosotros, por lo cual no es uno de los repositorios por default que <span class="caps">SBT</span> verifica.</p>
<p>Tambien actualizaremos nuestra definicion del proyecto para extender StandardProject, incluir una caracteristica de publicacion en <span class="caps">SVN</span>, y definir el repositorio al que deseamos publicarlo. Modificar SampleProject.scala con lo siguiente:</p>
<pre>
import sbt._
import com.twitter.sbt._

class SampleProject(info: ProjectInfo) extends StandardProject(info) with SubversionPublisher {
  val jackson = "org.codehaus.jackson" % "jackson-core-asl" % "1.6.1"
  val specs = "org.scala-tools.testing" % "specs_2.8.0" % "1.6.5" % "test"

  override def subversionRepository = Some("http://svn.local.twitter.com/maven/")
}
</pre>
<p>Ahora si ejecutamos la accion publish veremos lo siguiente</p>
<pre>
[info] == deliver ==
IvySvn Build-Version: null
IvySvn Build-DateTime: null
[info] :: delivering :: com.twitter#sample;1.0-SNAPSHOT :: 1.0-SNAPSHOT :: release :: Wed Nov 24 10:26:45 PST 2010
[info] 	delivering ivy file to /Users/mmcbride/projects/sbt-sample/target/ivy-1.0-SNAPSHOT.xml
[info] == deliver ==
[info] 
[info] == make-pom ==
[info] Wrote /Users/mmcbride/projects/sbt-sample/target/sample-1.0-SNAPSHOT.pom
[info] == make-pom ==
[info] 
[info] == publish ==
[info] :: publishing :: com.twitter#sample
[info] Scheduling publish to http://svn.local.twitter.com/maven/com/twitter/sample/1.0-SNAPSHOT/sample-1.0-SNAPSHOT.jar
[info] 	published sample to com/twitter/sample/1.0-SNAPSHOT/sample-1.0-SNAPSHOT.jar
[info] Scheduling publish to http://svn.local.twitter.com/maven/com/twitter/sample/1.0-SNAPSHOT/sample-1.0-SNAPSHOT.pom
[info] 	published sample to com/twitter/sample/1.0-SNAPSHOT/sample-1.0-SNAPSHOT.pom
[info] Scheduling publish to http://svn.local.twitter.com/maven/com/twitter/sample/1.0-SNAPSHOT/ivy-1.0-SNAPSHOT.xml
[info] 	published ivy to com/twitter/sample/1.0-SNAPSHOT/ivy-1.0-SNAPSHOT.xml
[info] Binary diff deleting com/twitter/sample/1.0-SNAPSHOT
[info] Commit finished r977 by 'mmcbride' at Wed Nov 24 10:26:47 PST 2010
[info] Copying from com/twitter/sample/.upload to com/twitter/sample/1.0-SNAPSHOT
[info] Binary diff finished : r978 by 'mmcbride' at Wed Nov 24 10:26:47 PST 2010
[info] == publish ==
[success] Successful.
[info] 
[info] Total time: 4 s, completed Nov 24, 2010 10:26:47 AM
</pre>
<p>Y (despues de cierto tiempo), podemos ir a <a href="http://binaries.local.twitter.com/maven/com/twitter/sample/1.0-SNAPSHOT/">binaries.local.twitter.com</a> para ver nuestro jar publicado.</p>
<h2>Agregando tareas</h2>
<p>Las tareas son funciones de Scala. La manera mas facil de agregar tareas es incluir un val en su definicion de proyecto usando el metodo task, p. e.</p>
<pre>
lazy val print = task {log.info("a test action"); None}
</pre>
<p>Si quieres dependencias y una descripcion puede agregarlas como se muestra a continuacion</p>
<pre>
lazy val print = task {log.info("a test action"); None}.dependsOn(compile) describedAs("prints a line after compile")
</pre>
<p>Si recargamos nuestro projecto y ejecutamos la accion print veremos lo siguiente</p>
<pre>
&gt; print
[info] 
[info] == print ==
[info] a test action
[info] == print ==
[success] Successful.
[info] 
[info] Total time: 0 s, completed Nov 24, 2010 11:05:12 AM
&gt; 
</pre>
<p>Asi funciona. Si esta definiendo una tarea en un proyecto simple esto funcionara bien. Sin embargo si esta definiendo esta en un plugin es bastante inflexible. Podria querer:</p>
<pre>
lazy val print = printAction
def printAction = printTask.dependsOn(compile) describedAs("prints a line after compile")
def printTask = task {log.info("a test action"); None}
</pre>
<p>Esto permite a losconsumidores anular la tarea en si. Las dependencias y/o descripciones de la tarea o accion. La mayoria de las acciones construidas en <span class="caps">SBT</span> siguen este patron. Como ejemplo podemos modificar la tarea interna package para imprimir la fecha y hora actual haciendo lo siguiente</p>
<pre>
lazy val printTimestamp = task { log.info("current time is " + System.currentTimeMillis); None}
override def packageAction = super.packageAction.dependsOn(printTimestamp)
</pre>
<p>Hay muchos ejemplos en standarProject de ajustar los valores predeterminados de <span class="caps">SBT</span> y agregar tareas personalizadas.</p>
<h2>Referencia rapida</h2>
<h3>Comandos comunes</h3>
<ul>
	<li>actions &#8211; muestra la acciones disponibles para el proyecto</li>
	<li>update &#8211; descarga las dependencias del proyecto</li>
	<li>compile &#8211; compila el codigo fuente</li>
	<li>test &#8211; ejecuta las pruebas</li>
	<li>package &#8211; crea archivo jar publicable</li>
	<li>publish-local &#8211; instala el jar construido en su cache ivy local</li>
	<li>publish &#8211; envia su jar a un repositorio remoto (Si esta configurado)</li>
</ul>
<h3>Comandos Moar</h3>
<ul>
	<li>test-failed &#8211; ejecuta cualquier especificacion fallida</li>
	<li>test-quick &#8211; ejecuta cualquier especificacion fallida y/o tenga dependencias actualizadas</li>
	<li>clean-cache &#8211; eliminar todo tipo de cosas en caché de <span class="caps">SBT</span>. Como clean para sbt</li>
	<li>clean-lib &#8211; elimina todo en la carpeta lib_managed</li>
</ul>
<h3>Estructura del proyecto</h3>
<p><span class="caps">TBD</span></p>
    </div> <!-- /container -->

    <div id="footer">
      <div class="inner">
        <div class="container">
          <p>

          Built at <a href="http://twitter.com/twitter"
          target="_blank">@twitter</a> by
          <a href="http://twitter.com/stevej" target="_blank">@stevej</a>,
          <a href="http://twitter.com/marius" target="_blank">@marius</a>, and
          <a href="http://twitter.com/lahosken" target="_blank">@lahosken</a>
          with much help from
          <a href="http://twitter.com/evanm" target="_blank">@evanm</a>,
          <a href="http://twitter.com/sprsquish"
          target="_blank">@sprsquish</a>,
          <a href="http://twitter.com/kevino" target="_blank">@kevino</a>,
          <a href="http://twitter.com/zuercher" target="_blank">@zuercher</a>,
          <a href="http://twitter.com/timtrueman"
          target="_blank">@timtrueman</a>,
          <a href="http://twitter.com/wickman" target="_blank">@wickman</a>,
          and <a href="http://twitter.com/mccv" target="_blank">@mccv</a>;
          Russian translation by
          <a href="https://github.com/appigram">appigram</a>;
          Chinese simple translation by
          <a href="https://github.com/jasonqu">jasonqu</a>;
          Korean translation by
          <a href="https://github.com/enshahar">enshahar</a>;<br />
          <br />

          Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>.
          </p>
        </div>
      </div>
    </div>

  </body>
</html>
